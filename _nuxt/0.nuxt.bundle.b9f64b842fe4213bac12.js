webpackJsonp([0],{345:function(t,e,n){"use strict";function o(t){n(358)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(360),r=n(434),s=n(16),a=o,u=s(i.a,r.a,a,null,null);e.default=u.exports},347:function(t,e,n){"use strict";function o(t){return"[object Array]"===D.call(t)}function i(t){return"[object ArrayBuffer]"===D.call(t)}function r(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t){return void 0===t}function c(t){return null!==t&&"object"==typeof t}function d(t){return"[object Date]"===D.call(t)}function p(t){return"[object File]"===D.call(t)}function f(t){return"[object Blob]"===D.call(t)}function h(t){return"[object Function]"===D.call(t)}function m(t){return c(t)&&h(t.pipe)}function A(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||o(t)||(t=[t]),o(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function y(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=y(e[n],t):e[n]=t}for(var e={},n=0,o=arguments.length;n<o;n++)b(arguments[n],t);return e}function w(t,e,n){return b(e,function(e,o){t[o]=n&&"function"==typeof e?x(e,n):e}),t}var x=n(350),C=n(370),D=Object.prototype.toString;t.exports={isArray:o,isArrayBuffer:i,isBuffer:C,isFormData:r,isArrayBufferView:s,isString:a,isNumber:u,isObject:c,isUndefined:l,isDate:d,isFile:p,isBlob:f,isFunction:h,isStream:m,isURLSearchParams:A,isStandardBrowserEnv:g,forEach:b,merge:y,extend:w,trim:v}},348:function(t,e,n){"use strict";(function(e){function o(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(347),r=n(372),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(351):void 0!==e&&(t=n(351)),t}(),transformRequest:[function(t,e){return r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){a.headers[t]={}}),i.forEach(["post","put","patch"],function(t){a.headers[t]=i.merge(s)}),t.exports=a}).call(e,n(70))},349:function(t,e,n){"use strict";function o(t){n(365)}var i=n(367),r=n(391),s=n(16),a=o,u=s(i.a,r.a,a,null,null);e.a=u.exports},350:function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}}},351:function(t,e,n){"use strict";var o=n(347),i=n(373),r=n(375),s=n(376),a=n(377),u=n(352),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(378);t.exports=function(t){return new Promise(function(e,c){var d=t.data,p=t.headers;o.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest,h="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||a(t.url)||(f=new window.XDomainRequest,h="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var A=t.auth.username||"",v=t.auth.password||"";p.Authorization="Basic "+l(A+":"+v)}if(f.open(t.method.toUpperCase(),r(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[h]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,o=t.responseType&&"text"!==t.responseType?f.response:f.responseText,r={data:o,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};i(e,c,r),f=null}},f.onerror=function(){c(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},o.isStandardBrowserEnv()){var g=n(379),b=(t.withCredentials||a(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;b&&(p[t.xsrfHeaderName]=b)}if("setRequestHeader"in f&&o.forEach(p,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===d&&(d=null),f.send(d)})}},352:function(t,e,n){"use strict";var o=n(374);t.exports=function(t,e,n,i,r){var s=new Error(t);return o(s,e,n,i,r)}},353:function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},354:function(t,e,n){"use strict";function o(t){this.message=t}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},355:function(t,e,n){"use strict";function o(t){n(392)}var i=n(394),r=n(395),s=n(16),a=o,u=s(i.a,r.a,a,null,null);e.a=u.exports},356:function(t,e,n){"use strict";function o(t){n(396)}var i=n(398),r=n(400),s=n(16),a=o,u=s(i.a,r.a,a,"data-v-18931964",null);e.a=u.exports},357:function(t,e,n){"use strict";function o(t,e){var n=[t[0]/180*Math.PI,t[1]/180*Math.PI],o=[e[0]/180*Math.PI,e[1]/180*Math.PI],i=(n[1]-o[1])*Math.cos(.5*(n[0]+o[0])),r=n[0]-o[0];return 6371e3*Math.sqrt(i*i+r*r)}e.a=o},358:function(t,e,n){var o=n(359);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("5005a29c",o,!0)},359:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".main-autocomplete input{font-size:110%;width:100%}table.vehicle-results tr.active td{background-color:#def}table.vehicle-results tr:hover td{background-color:#fed}table.vehicle-results tr.disabled td{color:#ccc;text-decoration:line-through}table.vehicle-results .destination-dropdown>button{background:transparent;width:100%;display:block;border:none;text-align:left;padding:.5em 0;cursor:pointer}table.vehicle-results .destination-dropdown>button:hover{background-color:#dcb}table.vehicle-results .destination-dropdown .destination-dropdown-menu{padding:.5em;background:#fff;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,.5);box-shadow:1px 1px 5px rgba(0,0,0,.5)}table.vehicle-results .menu-dropdown-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-shadow:.1em .1em .2em rgba(0,0,0,.5);box-shadow:.1em .1em .2em rgba(0,0,0,.5)}table.vehicle-results .menu-dropdown-buttons button{background:transparent;border:none;padding:.5em .3em;text-align:left;min-width:9em;cursor:pointer}table.vehicle-results .menu-dropdown-buttons button:hover{background:#fed}.location-preview{max-width:200px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer}.panel-container{position:fixed;top:0;left:0;bottom:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex}.panel-container .panel{-webkit-box-flex:1;-ms-flex:1 1 50%;flex:1 1 50%}.panel-container .panel.vehicle-info{overflow:scroll}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/pages/index.vue"],names:[],mappings:"AACA,yBAAyB,eAAe,UAAU,CACjD,AACD,mCAAmC,qBAAqB,CACvD,AACD,kCAAkC,qBAAqB,CACtD,AACD,qCAAqC,WAAW,4BAA4B,CAC3E,AACD,mDAAmD,uBAAuB,WAAW,cAAc,YAAY,gBAAgB,eAAgB,cAAc,CAC5J,AACD,yDAAyD,qBAAqB,CAC7E,AACD,uEAAuE,aAAc,gBAAiB,8CAA+C,qCAAsC,CAC1L,AACD,6CAA6C,oBAAoB,oBAAoB,aAAa,4BAA4B,6BAA6B,0BAA0B,sBAAsB,iDAAqD,wCAA4C,CAC3S,AACD,oDAAoD,uBAAuB,YAAY,kBAAoB,gBAAgB,cAAc,cAAc,CACtJ,AACD,0DAA0D,eAAe,CACxE,AACD,kBAAkB,gBAAgB,0BAA0B,uBAAuB,gBAAgB,mBAAmB,cAAc,CACnI,AACD,iBAAiB,eAAe,MAAM,OAAO,SAAS,QAAQ,oBAAoB,oBAAoB,YAAY,CACjH,AACD,wBAAwB,mBAAmB,iBAAiB,YAAY,CACvE,AACD,qCAAqC,eAAe,CACnD",file:"index.vue",sourcesContent:["\n.main-autocomplete input{font-size:110%;width:100%\n}\ntable.vehicle-results tr.active td{background-color:#def\n}\ntable.vehicle-results tr:hover td{background-color:#fed\n}\ntable.vehicle-results tr.disabled td{color:#CCC;text-decoration:line-through\n}\ntable.vehicle-results .destination-dropdown>button{background:transparent;width:100%;display:block;border:none;text-align:left;padding:0.5em 0;cursor:pointer\n}\ntable.vehicle-results .destination-dropdown>button:hover{background-color:#DCB\n}\ntable.vehicle-results .destination-dropdown .destination-dropdown-menu{padding:0.5em;background:white;-webkit-box-shadow:1px 1px 5px rgba(0,0,0,0.5);box-shadow:1px 1px 5px rgba(0,0,0,0.5)\n}\ntable.vehicle-results .menu-dropdown-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-shadow:0.1em 0.1em 0.2em rgba(0,0,0,0.5);box-shadow:0.1em 0.1em 0.2em rgba(0,0,0,0.5)\n}\ntable.vehicle-results .menu-dropdown-buttons button{background:transparent;border:none;padding:0.5em 0.3em;text-align:left;min-width:9em;cursor:pointer\n}\ntable.vehicle-results .menu-dropdown-buttons button:hover{background:#FED\n}\n.location-preview{max-width:200px;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:pointer\n}\n.panel-container{position:fixed;top:0;left:0;bottom:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex\n}\n.panel-container .panel{-webkit-box-flex:1;-ms-flex:1 1 50%;flex:1 1 50%\n}\n.panel-container .panel.vehicle-info{overflow:scroll\n}\n"],sourceRoot:""}])},360:function(t,e,n){"use strict";function o(t){var e=new Date(t);return isFinite(e.getTime())?e:null}var i=n(69),r=n.n(i),s=n(102),a=n.n(s),u=n(103),l=n.n(u),c=n(361),d=n.n(c),p=n(165),f=(n.n(p),n(4)),h=n.n(f),m=n(349),A=n(355),v=n(356),g=n(401),b=n(416),y=n(423),w=n(427),x=n(357);e.a={components:{OnemapAutocomplete:m.a,DatasheetCell:A.a,BusyStatus:v.a,Modal:y.a,Dropdown:b.a},data:function(){return{searchString:"",vehicles:[],vehicleStatuses:{},selectedVehicle:null,selectedJob:null,user:null,origin:null,originPlace:null,center:{lat:1.38,lng:103.8},zoom:11,changes:[],updatePromise:null}},mounted:function(){var t=this;window.onbeforeunload=this.$unload=function(){if(t.changes.length>0)return"You have unsaved changes. Are you sure you want to navigate away?"},p.database().ref("/locations/ambulance-medical-service").on("value",function(e){t.vehicles=d()(e.val())}),p.database().ref("/current_status/ambulance-medical-service").on("value",function(e){var n=e.val();t.vehicleStatuses=h()(n).toPairs().map(function(t){var e=l()(t,2),n=e[0],i=e[1];return[n,a()({},i,{busyUntil:o(i.busyUntil)})]}).fromPairs().value()}),this.user=p.auth().currentUser,p.auth().onAuthStateChanged(function(){t.user=p.auth().currentUser})},watch:{changes:function(t){var e=this;if(0===t.length)return"";if(this.updatePromise)return"";var n=h.a.clone(t);p.database().ref("/current_status/ambulance-medical-service").update(h()(n).map(function(t){var e=l()(t,3),n=e[0],o=e[1],i=e[2];return[n+"/"+o.replace(/\./g,"/"),i]}).fromPairs().value()).then(function(){e.changes=t.slice(n.length)})}},computed:{vehiclesWithStatus:function(){var t=this;return this.vehicles.map(function(e){var n=a()({},e,{status:a()({crew:"",details:"",destination:null,destinationDescription:"",destinationDescriptionExtra:"",origin:null,originDescription:"",originDescriptionExtra:"",busyUntil:null},t.vehicleStatuses[e.registrationno])}),o=!0,i=!1,s=void 0;try{for(var u,l=r()(t.changes);!(o=(u=l.next()).done);o=!0){var c=u.value;c[0]===n.registrationno&&h.a.set(n.status,c[1],c[2])}}catch(t){i=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return n})},sortedVehicles:function(){var t=this;if(this.origin){var e=h.a.map(this.vehiclesWithStatus,function(e){return a()({},e,{distance:Object(x.a)([parseFloat(e.latitude),parseFloat(e.longitude)],[t.origin.lat,t.origin.lng])})});return h.a.sortBy(e,"distance")}return h.a.sortBy(this.vehiclesWithStatus,"registrationno")},dashedLineOptions:function(){return{strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:4},offset:"0",repeat:"20px"}]}}},methods:{login:function(){var t=new p.auth.GoogleAuthProvider;p.auth().signInWithPopup(t)},updateOrigin:function(t){t&&(this.origin=t.location,this.originPlace=t,this.center=this.origin,this.zoom=15)},zoomTo:function(t){t&&(this.center=t,this.zoom=14)},zoomToPoints:function(t,e){if(t&&e){var n=new google.maps.LatLngBounds;n.extend(t),n.extend(e),this.$refs.map.fitBounds(n)}else this.zoomTo(t||e)},selectVehicle:function(t){this.selectedVehicle=t,this.zoomToPoints({lat:+t.latitude,lng:+t.longitude},this.origin)},makeIcon:function(t,e){return Object(w.a)(t,e)||{url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",anchor:"undefined"!=typeof google?new google.maps.Point(35,35):null}},pushChange:function(t,e,n){this.changes.push([t,e,n])},showDispatch:function(t){var e=this;this.$refs.modalHelper.show(g.a,{vehicle:t,originPlace:this.originPlace}).then(function(n){for(var o in n)e.pushChange(t.registrationno,o,n[o]);e.$refs.modalHelper.hide()}).catch(function(){e.$refs.modalHelper.hide()})},showJob:function(t,e,n){if(e&&n){var o={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)};console.log(e,n,o),this.selectedJob={origin:e,current:o,destination:n},this.zoomToPoints(e,n)}}}}},361:function(t,e,n){t.exports={default:n(362),__esModule:!0}},362:function(t,e,n){n(363),t.exports=n(5).Object.values},363:function(t,e,n){var o=n(23),i=n(364)(!1);o(o.S,"Object",{values:function(t){return i(t)}})},364:function(t,e,n){var o=n(35),i=n(26),r=n(48).f;t.exports=function(t){return function(e){for(var n,s=i(e),a=o(s),u=a.length,l=0,c=[];u>l;)r.call(s,n=a[l++])&&c.push(t?[n,s[n]]:s[n]);return c}}},365:function(t,e,n){var o=n(366);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("7e8bcc4d",o,!0)},366:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".onemap-autocomplete{position:relative}.onemap-autocomplete ul.onemap-autocomplete-search-results{position:absolute;left:0;top:100%;padding:0;margin:0}.onemap-autocomplete ul.onemap-autocomplete-search-results>li{list-style:none;padding:.2em;margin:0;border:1px solid #ccc;cursor:pointer;background-color:#fff}.onemap-autocomplete ul.onemap-autocomplete-search-results>li.active{background-color:#def}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/OnemapAutocomplete.vue"],names:[],mappings:"AACA,qBAAqB,iBAAiB,CACrC,AACD,2DAA2D,kBAAkB,OAAO,SAAS,UAAU,QAAQ,CAC9G,AACD,8DAA8D,gBAAgB,aAAc,SAAS,sBAAsB,eAAe,qBAAsB,CAC/J,AACD,qEAAqE,qBAAqB,CACzF",file:"OnemapAutocomplete.vue",sourcesContent:["\n.onemap-autocomplete{position:relative\n}\n.onemap-autocomplete ul.onemap-autocomplete-search-results{position:absolute;left:0;top:100%;padding:0;margin:0\n}\n.onemap-autocomplete ul.onemap-autocomplete-search-results>li{list-style:none;padding:0.2em;margin:0;border:solid 1px #CCC;cursor:pointer;background-color:white\n}\n.onemap-autocomplete ul.onemap-autocomplete-search-results>li.active{background-color:#DEF\n}\n"],sourceRoot:""}])},367:function(t,e,n){"use strict";var o=n(368),i=n.n(o),r=n(4),s=n.n(r),a=n(387),u=n.n(a),l=n(390);e.a={props:["placeholder","text"],data:function(){return{showDropdown:!0,searchQuery:"",searchResults:[],selectedIndex:0,inFlight:!1,viewingMap:!1,mapOptions:{mapTypeControl:!1}}},watch:{text:{immediate:!0,handler:function(t){this.searchQuery=t}}},computed:{selectedResult:function(){return this.searchResults[this.selectedIndex]}},methods:{nilOr:function(t){return"NIL"===t?null:t},updateResults:s.a.throttle(function(){var t=this;""===this.searchQuery?this.searchResults="":(this.inFlight=!0,i.a.get("https://developers.onemap.sg/commonapi/search?"+u.a.stringify({searchVal:this.searchQuery,returnGeom:"Y",getAddrDetails:"Y"})).then(function(e){var n=e.data.results.findIndex(function(e){return e.address===t.searchResults.address})||0;t.searchResults=e.data.results,t.selectedIndex=n,t.showDropdown=!0,t.inFlight=!1}))},500,{leading:!1,trailing:!0}),resultToLatLng:function(t){return{lat:parseFloat(t.LATITUDE),lng:parseFloat(t.LONGITUDE)}},selectIndex:function(t){this.selectedIndex=Math.min(this.searchResults.length-1,Math.max(0,t))},emitAndDismiss:function(){console.log(this.selectedIndex,this.selectedResult),this.selectedResult&&(this.searchQuery=this.selectedResult.ADDRESS,this.$emit("place_changed",Object(l.a)(this.selectedResult)),this.showDropdown=!1)},descriptionFromResult:function(t){return t.ADDRESS}}}},368:function(t,e,n){t.exports=n(369)},369:function(t,e,n){"use strict";function o(t){var e=new s(t),n=r(s.prototype.request,e);return i.extend(n,s.prototype,e),i.extend(n,e),n}var i=n(347),r=n(350),s=n(371),a=n(348),u=o(a);u.Axios=s,u.create=function(t){return o(i.merge(a,t))},u.Cancel=n(354),u.CancelToken=n(385),u.isCancel=n(353),u.all=function(t){return Promise.all(t)},u.spread=n(386),t.exports=u,t.exports.default=u},370:function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||o(t)||!!t._isBuffer)}},371:function(t,e,n){"use strict";function o(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var i=n(348),r=n(347),s=n(380),a=n(381),u=n(383),l=n(384);o.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),t=r.merge(i,this.defaults,{method:"get"},t),t.method=t.method.toLowerCase(),t.baseURL&&!u(t.url)&&(t.url=l(t.baseURL,t.url));var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head","options"],function(t){o.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){o.prototype[t]=function(e,n,o){return this.request(r.merge(o||{},{method:t,url:e,data:n}))}}),t.exports=o},372:function(t,e,n){"use strict";var o=n(347);t.exports=function(t,e){o.forEach(t,function(n,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[o])})}},373:function(t,e,n){"use strict";var o=n(352);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(o("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},374:function(t,e,n){"use strict";t.exports=function(t,e,n,o,i){return t.config=e,n&&(t.code=n),t.request=o,t.response=i,t}},375:function(t,e,n){"use strict";function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(347);t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(i.isURLSearchParams(e))r=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(o(e)+"="+o(t))}))}),r=s.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}},376:function(t,e,n){"use strict";var o=n(347);t.exports=function(t){var e,n,i,r={};return t?(o.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=o.trim(t.substr(0,i)).toLowerCase(),n=o.trim(t.substr(i+1)),e&&(r[e]=r[e]?r[e]+", "+n:n)}),r):r}},377:function(t,e,n){"use strict";var o=n(347);t.exports=o.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=o.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},378:function(t,e,n){"use strict";function o(){this.message="String contains an invalid character"}function i(t){for(var e,n,i=String(t),s="",a=0,u=r;i.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&e>>8-a%1*8)){if((n=i.charCodeAt(a+=.75))>255)throw new o;e=e<<8|n}return s}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=i},379:function(t,e,n){"use strict";var o=n(347);t.exports=o.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,r,s){var a=[];a.push(t+"="+encodeURIComponent(e)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(i)&&a.push("path="+i),o.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},380:function(t,e,n){"use strict";function o(){this.handlers=[]}var i=n(347);o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},381:function(t,e,n){"use strict";function o(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(347),r=n(382),s=n(353),a=n(348);t.exports=function(t){return o(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return o(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(o(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},382:function(t,e,n){"use strict";var o=n(347);t.exports=function(t,e,n){return o.forEach(n,function(n){t=n(t,e)}),t}},383:function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},384:function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},385:function(t,e,n){"use strict";function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(354);o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},386:function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},387:function(t,e,n){"use strict";e.decode=e.parse=n(388),e.encode=e.stringify=n(389)},388:function(t,e,n){"use strict";function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;r&&"number"==typeof r.maxKeys&&(u=r.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var d,p,f,h,m=t[c].replace(a,"%20"),A=m.indexOf(n);A>=0?(d=m.substr(0,A),p=m.substr(A+1)):(d=m,p=""),f=decodeURIComponent(d),h=decodeURIComponent(p),o(s,f)?i(s[f])?s[f].push(h):s[f]=[s[f],h]:s[f]=h}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},389:function(t,e,n){"use strict";function o(t,e){if(t.map)return t.map(e);for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(i(s))+n;return r(t[s])?o(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},390:function(t,e,n){"use strict";function o(t){return{location:{lat:parseFloat(t.LATITUDE),lng:parseFloat(t.LONGITUDE)},description:t.ADDRESS,result:t}}e.a=o},391:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"onemap-autocomplete"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.updateResults],keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40))return null;e.preventDefault(),t.selectIndex(t.selectedIndex+1)},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38))return null;e.preventDefault(),t.selectIndex(t.selectedIndex-1)},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27))return null;e.preventDefault(),t.showDropdown=!1},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;e.preventDefault(),t.emitAndDismiss(e)}]}}),t.searchResults&&t.showDropdown?n("ul",{staticClass:"onemap-autocomplete-search-results"},t._l(t.searchResults,function(e,o){return n("li",{class:{active:e===t.selectedResult},on:{click:function(e){t.selectIndex(o),t.emitAndDismiss(o)}}},[t._v("\n      "+t._s(t.nilOr(e.BLK_NO))+" "+t._s(t.nilOr(e.ROAD_NAME))+"\n      "+t._s(t.nilOr(e.BUILDING))+" "+t._s(t.nilOr(e.POSTAL))+"\n    ")])})):t._e()])},i=[],r={render:o,staticRenderFns:i};e.a=r},392:function(t,e,n){var o=n(393);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("0b11ae47",o,!0)},393:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".mock-focusable{text-decoration:none;color:#000}.datasheet-cell{position:relative}.the-editor,.the-editor-container{width:100%;position:absolute;top:0;min-height:100%;left:0}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/DatasheetCell.vue"],names:[],mappings:"AACA,gBAAgB,qBAAqB,UAAU,CAC9C,AACD,gBAAgB,iBAAiB,CAChC,AAGD,kCAFsB,WAAW,kBAAkB,MAAM,gBAAgB,MAAM,CAG9E",file:"DatasheetCell.vue",sourcesContent:["\n.mock-focusable{text-decoration:none;color:#000\n}\n.datasheet-cell{position:relative\n}\n.the-editor-container{width:100%;position:absolute;top:0;min-height:100%;left:0\n}\n.the-editor{position:absolute;top:0;min-height:100%;left:0;width:100%\n}\n"],sourceRoot:""}])},394:function(t,e,n){"use strict";e.a={props:{value:{},component:{type:String,default:"AutogrowTextarea"}},data:function(){return{edit:!1,isEditing:!1,editorStyle:null}},watch:{value:{immediate:!0,handler:function(t){this.edit=t}}},methods:{showComponent:function(t,e){var n=this;this.isEditing=!0,this.$nextTick(function(){return n.$nextTick(function(){var t=n.$refs["editor-component"];t=t.$el||t;var e=t.querySelectorAll(".focusable")[0]||t.querySelectorAll("input, textarea, a")[0];e&&(e.focus(),e.select(),e.addEventListener("blur",function(){n.isEditing=!1}))})})},commit:function(t){this.isEditing=!1}}}},395:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"cell",staticClass:"datasheet-cell",attrs:{tabindex:"1"},on:{click:t.showComponent}},[n("a",{staticClass:"mock-focusable",attrs:{href:"#",tabindex:t.isEditing?-1:0},on:{focus:t.showComponent,click:function(t){t.preventDefault()}}},[t._t("default",[t._v("\n      "+t._s(t.value)+"\n    ")])],2),t.isEditing?n("div",{ref:"editor-component",staticClass:"the-editor-container"},[t._t("editor")],2):t._e()])},i=[],r={render:o,staticRenderFns:i};e.a=r},396:function(t,e,n){var o=n(397);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("89de019c",o,!0)},397:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".free[data-v-18931964]{color:#0c0}.soon[data-v-18931964]{color:#d90}.busy[data-v-18931964]{color:#c00}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/BusyStatus.vue"],names:[],mappings:"AACA,uBACE,UAAY,CACb,AACD,uBACE,UAAY,CACb,AACD,uBACE,UAAY,CACb",file:"BusyStatus.vue",sourcesContent:["\n.free[data-v-18931964] {\r\n  color: #0C0;\n}\n.soon[data-v-18931964] {\r\n  color: #D90;\n}\n.busy[data-v-18931964] {\r\n  color: #C00;\n}\r\n"],sourceRoot:""}])},398:function(t,e,n){"use strict";var o=n(399),i=n.n(o),r=n(12),s=new r.default({data:function(){return{now:Date.now()}},created:function(){var t=this;this.$theInterval=setInterval(function(){t.now=Date.now()},2e4)},destroyed:function(){clearInterval(this.$theInterval)}});e.a={props:["value"],computed:{now:function(){return s.now}},methods:{dateformat:i.a}}},399:function(t,e,n){var o;!function(i){"use strict";function r(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function s(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var o=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-o);var i=(e-n)/6048e5;return 1+Math.floor(i)}function a(t){var e=t.getDay();return 0===e&&(e=7),e}function u(t){return null===t?"null":void 0===t?"undefined":"object"!=typeof t?typeof t:Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()}var l=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(o,i,c,d){if(1!==arguments.length||"string"!==u(o)||/\d/.test(o)||(i=o,o=void 0),o=o||new Date,o instanceof Date||(o=new Date(o)),isNaN(o))throw TypeError("Invalid date");i=String(l.masks[i]||i||l.masks.default);var p=i.slice(0,4);"UTC:"!==p&&"GMT:"!==p||(i=i.slice(4),c=!0,"GMT:"===p&&(d=!0));var f=c?"getUTC":"get",h=o[f+"Date"](),m=o[f+"Day"](),A=o[f+"Month"](),v=o[f+"FullYear"](),g=o[f+"Hours"](),b=o[f+"Minutes"](),y=o[f+"Seconds"](),w=o[f+"Milliseconds"](),x=c?0:o.getTimezoneOffset(),C=s(o),D=a(o),B={d:h,dd:r(h),ddd:l.i18n.dayNames[m],dddd:l.i18n.dayNames[m+7],m:A+1,mm:r(A+1),mmm:l.i18n.monthNames[A],mmmm:l.i18n.monthNames[A+12],yy:String(v).slice(2),yyyy:v,h:g%12||12,hh:r(g%12||12),H:g,HH:r(g),M:b,MM:r(b),s:y,ss:r(y),l:r(w,3),L:r(Math.round(w/10)),t:g<12?"a":"p",tt:g<12?"am":"pm",T:g<12?"A":"P",TT:g<12?"AM":"PM",Z:d?"GMT":c?"UTC":(String(o).match(e)||[""]).pop().replace(n,""),o:(x>0?"-":"+")+r(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10],W:C,N:D};return i.replace(t,function(t){return t in B?B[t]:t.slice(1,t.length-1)})}}();l.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},l.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},void 0!==(o=function(){return l}.call(e,n,e,t))&&(t.exports=o)}()},400:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null===t.value||t.now>t.value?n("div",{staticClass:"free"},[t._v("\n  Free\n")]):t.value-t.now<6e5?n("div",{staticClass:"soon"},[t._v("\n  Ending at "+t._s(t.dateformat(t.value,"HH:MM"))+"\n")]):n("div",{staticClass:"busy"},[t._v("\n  Ending at "+t._s(t.dateformat(t.value,"HH:MM"))+"\n")])},i=[],r={render:o,staticRenderFns:i};e.a=r},401:function(t,e,n){"use strict";function o(t){n(402)}var i=n(404),r=n(415),s=n(16),a=o,u=s(i.a,r.a,a,null,null);e.a=u.exports},402:function(t,e,n){var o=n(403);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("2fd9aff8",o,!0)},403:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".dispatch-modal textarea{font-family:sans-serif;border:1px solid #ccc;min-height:4em}.columns{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.columns>*{padding:0 1em;-webkit-box-flex:0;-ms-flex:0 1 300px;flex:0 1 300px}.columns .onemap-autocomplete{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.columns .onemap-autocomplete input{position:absolute;width:100%;height:100%;left:0;top:0}.button-row{text-align:center}.button-row button{min-width:10em;padding:.5em;font-weight:700;margin:0 .5em}.blank-location{font-style:italic;color:#ccc}.future-time-input-group button,.future-time-input-group input{height:2.4em;font-size:120%;text-align:center}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/Dispatch.vue"],names:[],mappings:"AACA,yBAAyB,uBAAuB,sBAAsB,cAAc,CACnF,AACD,SAAS,oBAAoB,oBAAoB,aAAa,8BAA8B,6BAA6B,uBAAuB,kBAAkB,CACjK,AACD,WAAW,cAAc,mBAAmB,mBAAmB,cAAc,CAC5E,AACD,8BAA8B,oBAAoB,oBAAoB,aAAa,mBAAmB,kBAAkB,aAAa,CACpI,AACD,oCAAoC,kBAAkB,WAAW,YAAY,OAAO,KAAK,CACxF,AACD,YAAY,iBAAiB,CAC5B,AACD,mBAAmB,eAAe,aAAc,gBAAiB,aAAc,CAC9E,AACD,gBAAgB,kBAAkB,UAAU,CAC3C,AACD,+DAA+D,aAAa,eAAe,iBAAiB,CAC3G",file:"Dispatch.vue",sourcesContent:["\n.dispatch-modal textarea{font-family:sans-serif;border:solid 1px #CCC;min-height:4em\n}\n.columns{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row\n}\n.columns>*{padding:0 1em;-webkit-box-flex:0;-ms-flex:0 1 300px;flex:0 1 300px\n}\n.columns .onemap-autocomplete{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto\n}\n.columns .onemap-autocomplete input{position:absolute;width:100%;height:100%;left:0;top:0\n}\n.button-row{text-align:center\n}\n.button-row button{min-width:10em;padding:0.5em;font-weight:bold;margin:0 0.5em\n}\n.blank-location{font-style:italic;color:#CCC\n}\n.future-time-input-group button,.future-time-input-group input{height:2.4em;font-size:120%;text-align:center\n}\n"],sourceRoot:""}])},404:function(t,e,n){"use strict";var o=n(102),i=n.n(o),r=n(349),s=n(355),a=n(356),u=n(405),l=n(412),c=n(4),d=(n.n(c),n(357));e.a={components:{OnemapAutocomplete:r.a,BusyStatus:a.a,DatasheetCell:s.a,HumanizedDuration:l.a,FutureTimeInput:u.a},props:["resolve","reject","vehicle","originPlace"],data:function(){return{originDescription:"",origin:null,originExtra:"",destinationDescription:"",destinationExtra:"",destination:null,details:"",busyUntil:null,timeDirty:!1,now:Date.now()}},created:function(){var t=this;this.$nowInterval=setInterval(function(){t.now=Date.now()},6e4)},destroyed:function(){clearInterval(this.$nowInterval)},computed:{estimatedTime:function(){if(this.origin&&this.destination){return(Object(d.a)([parseFloat(this.vehicle.latitude),parseFloat(this.vehicle.longitude)],[this.origin.lat,this.origin.lng])+Object(d.a)([this.origin.lat,this.origin.lng],[this.destination.lat,this.destination.lng]))/1e3/50*36e5+12e5}return null}},watch:{estimatedTime:function(t){this.timeDirty||null===t||(this.busyUntil=new Date(Date.now()+t))},originPlace:{immediate:!0,handler:function(t){t&&(this.originDescription=t.result.ADDRESS,this.origin=t.location)}}},methods:{updateGeo:function(t,e){this[t+"Description"]=e.result.ADDRESS,this[t]=e.location},returnDispatch:function(){this.resolve(i()({},Object(c.pick)(this,["origin","originDescription","originExtra","destination","destinationDescription","destinationExtra","details"]),{busyUntil:this.busyUntil?new Date(this.busyUntil):null}))},addTime:function(t){return this.timeDirty=!0,new Date(Math.max(Date.now(),(this.busyUntil?this.busyUntil.getTime():Date.now())+t))}}}},405:function(t,e,n){"use strict";var o=n(406),i=n(411),r=n(16),s=r(o.a,i.a,null,null,null);e.a=s.exports},406:function(t,e,n){"use strict";var o=n(103),i=n.n(o),r=n(407),s=n.n(r),a=n(408);e.a={props:["value"],components:{TimeInput:a.a},computed:{formattedValue:function(){return this.value?s()(this.value.getHours(),2,"0")+":"+s()(this.value.getMinutes(),2,"0"):""}},methods:{emitDate:function(t){if(!t)return this.$emit("input",t);var e=t.split(":"),n=i()(e,2),o=n[0],r=n[1],s=new Date;s.setHours(parseInt(o)||0,parseInt(r)||0),s.getTime()-Date.now()<-6e4&&s.setDate(s.getDate()+1),this.$emit("input",s)}}}},407:function(t,e,n){"use strict";function o(t,e,n){if(t+="",(e-=t.length)<=0)return t;if(n||0===n||(n=" ")," "===(n+="")&&e<10)return i[e]+t;for(var o="";;){if(1&e&&(o+=n),!(e>>=1))break;n+=n}return o+t}t.exports=o;var i=[""," ","  ","   ","    ","     ","      ","       ","        ","         "]},408:function(t,e,n){"use strict";var o=n(409),i=n(410),r=n(16),s=r(o.a,i.a,null,null,null);e.a=s.exports},409:function(t,e,n){"use strict";var o=/^([0-9]{1,2}):?([0-9]{2})$/;e.a={props:["value"],methods:{verify:function(t){var e=t.target.value;if(e){var n=e.match(o);n?this.$emit("input",[n[1].padStart(2,"0"),n[2].padStart(2,"0")].join(":")):this.$emit("input",this.value)}else this.$emit("input",null)}}}},410:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{attrs:{type:"text"},domProps:{value:t.value},on:{change:t.verify}})},i=[],r={render:o,staticRenderFns:i};e.a=r},411:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("TimeInput",{attrs:{value:t.formattedValue},on:{input:function(e){t.emitDate(e)}}})},i=[],r={render:o,staticRenderFns:i};e.a=r},412:function(t,e,n){"use strict";var o=n(413),i=n(414),r=n(16),s=r(o.a,i.a,null,null,null);e.a=s.exports},413:function(t,e,n){"use strict";e.a={props:["duration"],computed:{absDuration:function(){return this.duration&&Math.abs(this.duration)}}}},414:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[null===t.duration||void 0===t.duration?[t._v("\n    "+t._s(" ")+"\n  ")]:t.absDuration<6e4?[t._v("\n    Around now\n  ")]:[t.absDuration<36e5?[t._v("\n      "+t._s((t.absDuration/6e4).toFixed(0))+" minutes\n    ")]:t.absDuration<5184e6?[t._v("\n      "+t._s(Math.floor(t.absDuration/36e5))+" hours\n      "+t._s(Math.floor(t.absDuration%36e5/6e4))+" minutes\n    ")]:t.absDuration<189216e7?[t._v("\n      "+t._s((t.absDuration/24/36e5).toFixed(0))+" days\n    ")]:[t._v("\n      "+t._s(Math.abs((new Date).getFullYear()-new Date(Date.now()+t.duration).getFullYear()))+" years\n    ")],t._v("\n    "+t._s(t.duration<0?"ago":"from now")+"\n  ")]],2)},i=[],r={render:o,staticRenderFns:i};e.a=r},415:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dispatch-modal"},[n("h1",[t._v(t._s(t.vehicle.registrationno))]),n("h2",[t._v(t._s(t.vehicle.status.crew))]),n("h3",[t._v("Currently at: "+t._s(t.vehicle.location))]),n("h3",[t._v("Busy until: "+t._s(t.vehicle.status.busyUntil)+" "),n("BusyStatus",{staticStyle:{display:"inline-block"},attrs:{value:t.vehicle.status.busyUntil}})],1),n("div",{staticClass:"columns"},[n("div",[t._v("\n      Origin:\n      "),n("DatasheetCell",[t.originDescription?n("div",[t._v("\n          "+t._s(t.originDescription)+"\n        ")]):n("div",{staticClass:"blank-location"},[t._v("\n          (Origin address)\n        ")]),n("OnemapAutocomplete",{staticClass:"the-editor",attrs:{text:t.originDescription},on:{place_changed:function(e){t.updateGeo("origin",e)}},slot:"editor"})],1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.originExtra,expression:"originExtra"}],staticClass:"full-width",attrs:{placeholder:"e.g. #01-10, Ward 10, Bed 6"},domProps:{value:t.originExtra},on:{input:function(e){e.target.composing||(t.originExtra=e.target.value)}}})],1),n("div",[t._v("\n      Destination:\n      "),n("DatasheetCell",[t.destinationDescription?n("div",[t._v("\n          "+t._s(t.destinationDescription)+"\n        ")]):n("div",{staticClass:"blank-location"},[t._v("\n          (Destination address)\n        ")]),n("OnemapAutocomplete",{staticClass:"the-editor",attrs:{text:t.destinationDescription},on:{place_changed:function(e){t.updateGeo("destination",e)}},slot:"editor"})],1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.destinationExtra,expression:"destinationExtra"}],staticClass:"full-width",attrs:{placeholder:"e.g. #01-10, Ward 10, Bed 6"},domProps:{value:t.destinationExtra},on:{input:function(e){e.target.composing||(t.destinationExtra=e.target.value)}}})],1)]),n("div",[t._v("\n    This case ends at:\n    "),n("div",{staticClass:"future-time-input-group"},[n("button",{on:{click:function(e){t.busyUntil=t.addTime(-18e5)}}},[t._v("-30")]),n("button",{on:{click:function(e){t.busyUntil=t.addTime(-6e5)}}},[t._v("-10")]),n("FutureTimeInput",{attrs:{placeholder:"18:00"},nativeOn:{input:function(e){t.timeDirty=!0}},model:{value:t.busyUntil,callback:function(e){t.busyUntil=e},expression:"busyUntil"}}),n("button",{on:{click:function(e){t.busyUntil=t.addTime(6e5)}}},[t._v("+10")]),n("button",{on:{click:function(e){t.busyUntil=t.addTime(18e5)}}},[t._v("+30")])],1),n("HumanizedDuration",{attrs:{duration:t.busyUntil?t.busyUntil-t.now:null}}),n("br"),n("br")],1),n("div",[t._v("\n    Details:\n    "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details,expression:"details"}],staticClass:"full-width",attrs:{placeholder:"e.g. SoB, needs oxygen, family members"},domProps:{value:t.details},on:{input:function(e){e.target.composing||(t.details=e.target.value)}}})]),n("div",{staticClass:"button-row"},[n("button",{on:{click:t.returnDispatch}},[t._v("OK")]),n("button",{on:{click:t.reject}},[t._v("Cancel")])])])},i=[],r={render:o,staticRenderFns:i};e.a=r},416:function(t,e,n){"use strict";function o(t){n(417),n(419)}var i=n(421),r=n(422),s=n(16),a=o,u=s(i.a,r.a,a,null,null);e.a=u.exports},417:function(t,e,n){var o=n(418);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("9dbf19a4",o,!0)},418:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".dropdown-container{position:relative;overflow:visible}.dropdown-container .dropdown{position:absolute;z-index:100;background-color:#fff}.dropdown-container .dropdown.align-left{top:100%;left:0}.dropdown-container .dropdown.align-right{top:100%;right:0}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/Dropdown.vue"],names:[],mappings:"AACA,oBAAoB,kBAAkB,gBAAgB,CACrD,AACD,8BAA8B,kBAAkB,YAAY,qBAAsB,CACjF,AACD,yCAAyC,SAAS,MAAM,CACvD,AACD,0CAA0C,SAAS,OAAO,CACzD",file:"Dropdown.vue",sourcesContent:["\n.dropdown-container{position:relative;overflow:visible\n}\n.dropdown-container .dropdown{position:absolute;z-index:100;background-color:white\n}\n.dropdown-container .dropdown.align-left{top:100%;left:0\n}\n.dropdown-container .dropdown.align-right{top:100%;right:0\n}\n"],sourceRoot:""}])},419:function(t,e,n){var o=n(420);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("6e954277",o,!0)},420:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Dropdown.vue",sourceRoot:""}])},421:function(t,e,n){"use strict";e.a={props:{align:{default:"left"}},data:function(){return{dropdownOpen:!1}},mounted:function(){var t=this;"undefined"!=typeof document&&document.addEventListener("click",this.$clickEvent=function(e){t.$el.contains(e.target)||(t.dropdownOpen=!1)})},destroyed:function(){this.$clickEvent&&document.removeEventListener("click",this.$clickEvent)},methods:{dismissDialog:function(){this.dropdownOpen=!1}}}},422:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown-container"},[n("button",{on:{click:function(e){t.dropdownOpen=!t.dropdownOpen}}},[t._t("menu-button")],2),t.dropdownOpen?n("div",{staticClass:"dropdown",class:(o={},o["align-"+t.align]=!0,o)},[t._t("dropdown",null,{dismiss:t.dismissDialog})],2):t._e()]);var o},i=[],r={render:o,staticRenderFns:i};e.a=r},423:function(t,e,n){"use strict";function o(t){n(424)}var i=n(426),r=n(16),s=o,a=r(i.a,null,s,null,null);e.a=a.exports},424:function(t,e,n){var o=n(425);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(47)("8dd261cc",o,!0)},425:function(t,e,n){e=t.exports=n(46)(!0),e.push([t.i,".modal-backdrop{background-color:rgba(0,0,0,.5);position:fixed;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:999}.modal-dialog{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;min-width:400px;width:80vw;background-color:#fff;margin:auto;min-height:400px;padding:1em}","",{version:3,sources:["C:/Users/Daniel/Desktop/MapApp/client/components/Modal.vue"],names:[],mappings:"AACA,gBAAgB,gCAAiC,eAAe,MAAM,OAAO,QAAQ,SAAS,oBAAoB,oBAAoB,aAAa,yBAAyB,sBAAsB,mBAAmB,wBAAwB,qBAAqB,uBAAuB,WAAW,CACnS,AACD,cAAc,mBAAmB,kBAAkB,cAAc,gBAAgB,WAAW,sBAAuB,YAAY,iBAAiB,WAAW,CAC1J",file:"Modal.vue",sourcesContent:["\n.modal-backdrop{background-color:rgba(0,0,0,0.5);position:fixed;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:999\n}\n.modal-dialog{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;min-width:400px;width:80vw;background-color:white;margin:auto;min-height:400px;padding:1em\n}\n"],sourceRoot:""}])},426:function(t,e,n){"use strict";var o=n(49),i=n.n(o),r=n(17),s=n.n(r),a=n(102),u=n.n(a);e.a={data:function(){return{resolve:null,reject:null,props:null,component:null}},render:function(t){return this.component?t("div",{class:{"modal-backdrop":!0}},[t("div",{class:{"modal-dialog":!0}},[t(this.component,{props:u()({resolve:this.resolve,reject:this.reject},this.props)})])]):""},methods:{show:function(t,e){var n=this;return new s.a(function(o,r){i()(n,{component:t,props:e,resolve:o,reject:r})})},hide:function(){this.component=this.props=this.resolve=this.reject=null}}}},427:function(t,e,n){"use strict";function o(t,e){return h.rotate((1-t)*Math.PI/4,e)}e.a=o;var i=n(17),r=n.n(i),s=n(428),a=n.n(s),u=n(429),l=n.n(u),c=n(433),d=n.n(c),p="undefined"!=typeof document&&document.createElement("canvas");p&&(p.width=70,p.height=70);var f=function(){function t(e){var n=this;a()(this,t),this.loaded=!1,this.image=new Image,this.image.src=e,this.imageLoadPromise=new r.a(function(t){n.image.onload=t}).then(function(){n.loaded=!0})}return l()(t,[{key:"rotate",value:function(t,e){if(!this.loaded)return null;var n=p.getContext("2d");return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,70,70),n.translate(35,35),n.rotate(t),n.translate(-35,-35),n.drawImage(this.image,0,0,70,70),e&&(n.setTransform(1,0,0,1,0,0),n.font="bold 12px sans-serif",n.fillStyle="black",n.strokeStyle="white",n.textAlign="center",n.textBaseline="middle",n.strokeText(e+"",35,58),n.fillText(e+"",35,58)),p.toDataURL()}}]),t}(),h="undefined"!=typeof document&&new f(d.a)},428:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},429:function(t,e,n){"use strict";e.__esModule=!0;var o=n(430),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i.default)(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},430:function(t,e,n){t.exports={default:n(431),__esModule:!0}},431:function(t,e,n){n(432);var o=n(5).Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},432:function(t,e,n){var o=n(23);o(o.S+o.F*!n(25),"Object",{defineProperty:n(24).f})},433:function(t,e,n){t.exports=n.p+"img/ambulanceIcon.5bbe5df.png"},434:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-container"},[n("section",{staticClass:"panel vehicle-info"},[t.user?t._e():n("button",{on:{click:t.login}},[t._v("Login")]),n("OnemapAutocomplete",{staticClass:"main-autocomplete",attrs:{text:t.searchString,placeholder:"Enter address / postal code"},on:{place_changed:t.updateOrigin}}),n("table",{staticClass:"vehicle-results"},[t._m(0),n("tbody",t._l(t.sortedVehicles,function(e){return n("tr",{class:{active:t.selectedVehicle&&e.registrationno===t.selectedVehicle.registrationno,disabled:e.status.disabled}},[n("td",[t._v("\n          "+t._s(e.registrationno)+"\n        ")]),n("td",[n("div",{staticClass:"location-preview",attrs:{title:e.location},on:{click:function(n){t.selectVehicle(e)}}},[t._v("\n            "+t._s(e.location)+"\n          ")])]),n("td",[t.origin?[t._v(t._s((e.distance/1e3).toFixed(1))+" km")]:t._e()],2),n("td",[n("DatasheetCell",[t._v("\n            "+t._s(e.status.crew||" ")+"\n\n            "),n("input",{staticClass:"the-editor",attrs:{type:"text"},domProps:{value:e.status.crew},on:{change:function(n){t.pushChange(e.registrationno,"crew",n.target.value)}},slot:"editor"})])],1),n("td",{staticClass:"destination-dropdown-cell"},[n("Dropdown",{staticClass:"destination-dropdown",attrs:{align:"left"}},[n("div",{staticClass:"menu-button",slot:"menu-button"},[t._v("\n              "+t._s(e.status.destinationDescription)+"\n            ")]),n("div",{staticClass:"destination-dropdown-menu",on:{click:function(n){t.showJob(e,e.status.origin,e.status.destination)}},slot:"dropdown"},[n("h4",[t._v("From: "+t._s(e.status.originDescription))]),n("div",[t._v(t._s(e.status.originDescriptionExtra))]),n("hr"),n("h4",[t._v("To: "+t._s(e.status.destinationDescription))]),n("div",[t._v(t._s(e.status.destinationDescriptionExtra))]),n("hr"),n("h4",[t._v(t._s(e.status.details))])])])],1),n("td",[e.status.disabled?t._e():n("BusyStatus",{attrs:{value:e.status.busyUntil}})],1),n("td",{staticClass:"toolbar-cell",staticStyle:{"white-space":"nowrap"}},[n("button",{on:{click:function(n){t.showDispatch(e)}}},[t._v("\n            »\n          ")]),n("Dropdown",{staticStyle:{display:"inline-block"},attrs:{align:"right"},scopedSlots:t._u([{key:"dropdown",fn:function(o){return[n("div",{staticClass:"menu-dropdown-buttons"},[e.status.disabled?t._e():n("button",{on:{click:function(n){t.pushChange(e.registrationno,"busyUntil",null),o.dismiss()}}},[t._v("\n                    Mark as Free\n                  ")]),n("div",[n("hr")]),n("button",{on:{click:function(n){t.pushChange(e.registrationno,"disabled",!e.status.disabled),o.dismiss()}}},[t._v("\n                    "+t._s(e.status.disabled?"Enable":"Disable")+"\n                  ")])])]}}])},[n("div",{staticClass:"menu-button",slot:"menu-button"},[t._v("\n                ...\n                "),n("i",{staticClass:"mdi mdi-triangle"})])])],1)])}))])],1),n("GmapMap",{ref:"map",staticClass:"panel",attrs:{center:t.center,zoom:t.zoom}},[n("GmapMarker",{attrs:{label:"S",position:t.origin}}),t._l(t.sortedVehicles,function(e){return n("GmapMarker",{key:e.registrationno,attrs:{position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},icon:t.makeIcon(e.direction,e.registrationno)}})}),t.selectedVehicle&&t.origin?n("GmapPolyline",{attrs:{path:[{lat:parseFloat(t.selectedVehicle.latitude),lng:parseFloat(t.selectedVehicle.longitude)},t.origin]}}):t._e(),t.selectedJob?n("GmapPolyline",{attrs:{path:[t.selectedJob.origin,t.selectedJob.destination],options:t.dashedLineOptions}}):t._e(),t.selectedJob?n("GmapPolyline",{attrs:{path:[t.selectedJob.current,t.selectedJob.destination],options:t.dashedLineOptions}}):t._e(),t.selectedJob?n("GmapPolyline",{attrs:{path:[t.selectedJob.origin,t.selectedJob.current],options:t.dashedLineOptions}}):t._e()],2),n("Modal",{ref:"modalHelper"})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Vehicle")]),n("th",[t._v("Location")]),n("th",[t._v("Dist")]),n("th",[t._v("Crew")]),n("th",[t._v("Destination")]),n("th",[t._v("Busy until")]),n("th",[t._v("Actions")])])])}],r={render:o,staticRenderFns:i};e.a=r}});
//# sourceMappingURL=0.nuxt.bundle.b9f64b842fe4213bac12.js.map